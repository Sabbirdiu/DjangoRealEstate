{% extends 'base.html' %}
{% load static %}

{% block content %}
    
    <!--Page Banner Section start-->
    <div class="page-banner-section section">
        <div class="container">
            <div class="row">
                <div class="col">
                    <h1 class="page-banner-title">News Details</h1>
                    <ul class="page-breadcrumb">
                        <li><a href="{% url 'home' %}">Home</a></li>
                        <li class="active">News Details Left Sidebar</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!--Page Banner Section end-->

    <!--News Section start-->
    <div class="news-section section pt-100 pt-lg-80 pt-md-70 pt-sm-60 pt-xs-50 pb-100 pb-lg-80 pb-md-70 pb-sm-60 pb-xs-50">
        <div class="container">
            <div class="row">
               
                <div class="col-xl-9 col-lg-8 col-12 order-1 order-lg-2 mb-sm-50 mb-xs-50">
                    
                    <div class="single-news-item">
                        <div class="image"><img src="{{ obj.photo_main.url }}" alt=""></div>
                        <div class="content">
                            <h2 class="title">{{ obj.title }}</h2>
                            <ul class="news-meta">
                                <li>By - <a href="#"> {{ obj.author }}</a></li>
                                <li>{{ obj.timestamp|date:"F d, Y" }}</li>
                            </ul>
                            <div class="desc">
                                <p>{{obj.overview|safe}} </p>
                                
                            </div>
                        </div>
                    </div>
                    
                    <div class="news-navigation mb-50">
                        <a href="#" class="prev-blog"><i class="fa fa-long-arrow-left"></i>Previous</a>
                        <a href="#" class="next-blog"><i class="fa fa-long-arrow-right"></i>Next</a>
                    </div>
                        
                    <!--Comment start-->
                    <div class="comment-wrap section">
                        <h3> Total Comments {{comments.count}}</h3>
                        {% for comment in comments %}
                        <ul class="comment-list">
                            <li>
                                <div class="comment">
                                   
                                    <div class="content">
                                        <h5>{{ comment.name }}  </h5>
                                        <div class="d-flex flex-wrap justify-content-between">
                                            <span class="time">{{ comment.created }}</span>
                                            <!-- <a href="#" class="reply">reply</a> -->
                                            <!-- <button id="formButton" type="button" name="button" class="reply-btn reply button btn-outline-dark btn-sm" >Reply</button> -->
                                        </div>
                                        <div class="decs">
                                            <p>{{ comment.body|linebreaks }}</p>
                                        </div>
                                    </div>
                                </div>
                                {% for replay in comment.replies.all %}
                                <ul class="child-comment">
                                    <li>
                                        <div class="comment">
                                           
                                            <div class="content">
                                                <h5>{{ replay.name }} </h5>
                                                <div class="d-flex flex-wrap justify-content-between">
                                                    <span class="time"> {{ replay.created }}</span>
                                                
                                                    <button id="formButton" type="button" name="button" class="reply-btn reply button btn-outline-dark btn-sm" >Reply</button>
                                                </div>
                                                <div class="decs replied-comments">
                                                    <p>{{ replay.body }}</p>
                                                    <form action="." method="post" id="form1">
                                                        <!-- {{ comment_form.as_p }}
                                                        {% csrf_token %} -->
                                                       
                                                       <input type="hidden" name="parent_id" value="{{ comment.id }}">
                                                       <input class="  btn btn-primary" type="button" name="button" value="Replay">
                                                   </form>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                                {% endfor %}
                            </li>
                           
                        </ul> 
                        {% empty %}
                   
                        <h4>There are no comments yet.</h4>
                        {% endfor %}
                      
                        <h3>Add a Comment</h3>

                        <div class="comment-form">
                            <form action="." method="POST">
                                <div class="">
                                    {{ comment_form.as_p }}
                                    {% csrf_token %}
                                    <div class="col-12"><button type="submit" class="btn">send now</button></div>
                                </div>
                            </form>
                        </div>

                    </div>
                    <!--Comment end-->
                    
                </div>
                
                <div class="col-xl-3 col-lg-4 col-12 order-2 order-lg-1 pr-30 pr-sm-15 pr-xs-15">
                    
                    <!--Sidebar start-->
                    <div class="sidebar">
                        <h4 class="sidebar-title"><span class="text">Search</span><span class="shape"></span></h4>
                        
                        <div class="sidebar-search">
                            <form action="#">
                                <input type="text" placeholder="Search">
                                <button><i class="pe-7s-search"></i></button>
                            </form>
                        </div>
                        
                    </div>
                    <!--Sidebar end-->
                    
                    <!--Sidebar start-->
                    <div class="sidebar">
                        <h4 class="sidebar-title"><span class="text">Categiry</span><span class="shape"></span></h4>
                        
                        <ul class="sidebar-list">
                            <li><a href="#">Houses</a></li>
                            <li><a href="#">Real Home</a></li>
                            <li><a href="#">Garages</a></li>
                            <li><a href="#">Real Estates</a></li>
                            <li><a href="#">Properties</a></li>
                            <li><a href="#">Family House</a></li>
                        </ul>
                        
                    </div>
                    <!--Sidebar end-->
                    
                    <!--Sidebar start-->
                    <div class="sidebar">
                        <h4 class="sidebar-title"><span class="text">Popular News</span><span class="shape"></span></h4>
                        
                        <!--Sidebar Property start-->
                        <div class="sidebar-news-list">
                            
                            <div class="sidebar-news">
                                <div class="image">
                                    <a href="news-details.html"><img src="assets/images/news/sidebar-news-1.jpg" alt=""></a>
                                </div>
                                <div class="content">
                                    <h5 class="title"><a href="news-details.html">Duplex Villa with Altra Concept</a></h5>
                                    <span class="date">September 30, 2020</span>
                                </div>
                            </div>
                            
                            <div class="sidebar-news">
                                <div class="image">
                                    <a href="news-details.html"><img src="assets/images/news/sidebar-news-2.jpg" alt=""></a>
                                </div>
                                <div class="content">
                                    <h5 class="title"><a href="news-details.html">Joint Mortgage: Pros vs. Cons</a></h5>
                                    <span class="date">September 30, 2020</span>
                                </div>
                            </div>
                            
                            <div class="sidebar-news">
                                <div class="image">
                                    <a href="news-details.html"><img src="assets/images/news/sidebar-news-3.jpg" alt=""></a>
                                </div>
                                <div class="content">
                                    <h5 class="title"><a href="news-details.html">Dealing with Student Loan Debt</a></h5>
                                    <span class="date">September 30, 2020</span>
                                </div>
                            </div>
                            
                        </div>
                        <!--Sidebar Property end-->
                        
                    </div>
                    
                    <!--Sidebar start-->
                    <div class="sidebar">
                        <h4 class="sidebar-title"><span class="text">Archive</span><span class="shape"></span></h4>
                        
                        <ul class="sidebar-list">
                            <li><a href="#">October 2020</a></li>
                            <li><a href="#">September 2020</a></li>
                            <li><a href="#">August 2020</a></li>
                            <li><a href="#">July 2020</a></li>
                            <li><a href="#">Jun 2020</a></li>
                            <li><a href="#">May 2020</a></li>
                        </ul>
                        
                    </div>
                    <!--Sidebar end-->
                    
                    <!--Sidebar start-->
                    <div class="sidebar">
                        <h4 class="sidebar-title"><span class="text">Popular Tags</span><span class="shape"></span></h4>
                        
                        <!--Sidebar Tags start-->
                        <div class="sidebar-tags">
                            <a href="#">Houses</a>
                            <a href="#">Real Home</a>
                            <a href="#">Baths</a>
                            <a href="#">Beds</a>
                            <a href="#">Garages</a>
                            <a href="#">Family</a>
                            <a href="#">Real Estates</a>
                            <a href="#">Properties</a>
                            <a href="#">Location</a>
                            <a href="#">Price</a>
                        </div>
                        <!--Sidebar Tags end-->
                    
                    </div>
            
                </div>
                
            </div>
        </div>
    </div>
    <!--News Section end-->
    <!-- Comments Form --> 
    <!-- {% for comment in comments %}
    <div class="comment" style="background-color:">
        <blockquote>
        <p style="background-color: hotpink;" class="info">{{ comment.name }} | {{ comment.created }}</p>
            {{ comment.body|linebreaks }}
            <button type="button" name="button" class="reply-btn btn-outline-dark btn-sm" >Reply</button> 
        </blockquote class="blockquote" >          
        <div class="replied-comments"  style="display: none;" >
        {% for replay in comment.replies.all %}
            <p style="background-color: khaki;" class="info">{{ replay.name }} | {{ replay.created }}</p>
            <li style="background-color: lightcoral;" >{{ replay.body }}</li>
        {% endfor %}
     </div>
     <script src="">
         $('.reply-btn').click(function(){

            $(this).parent().next('.replied-comments').fadeToggle()
         })
     </script>
        <h5>Replay</h5>
        
        <script>

        </script>
        <form action="." method="post">
             {{ comment_form.as_p }}
            {% csrf_token %}
            
            <input type="hidden" name="parent_id" value="{{ comment.id }}">
            <input class="btn btn-primary" type="submit" value="Replay">
        </form>
    </div>
    {% empty %}
    <h4>There are no comments yet.</h4>
    {% endfor %} --> 
   
<!--    
    <h2>Add a new comment</h2>
    <form action="." method="post">
        {{ comment_form.as_p }}
        {% csrf_token %}
        <button type="submit">Add comment</button>
    </form> -->

<!-- Comment with nested comments -->
<script src="text/javascript">
$('.reply-btn').click(function(){

$(this).parent().next('.replied-comments').fadeToggle()
})
</script>
    {% endblock %}